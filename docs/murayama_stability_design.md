# 村山の式を利用したトンネル切羽安定性評価システム設計書

## 1. システム概要

本システムは、村山の式を用いてトンネル切羽の安定性を評価するものである。滑り面形状として対数らせん曲線を仮定し、力のモーメントつり合いを用いて必要な切羽支保圧を計算する。

## 2. システム要件

### 入力項目

- トンネル断面寸法 (切羽高さ：H)
- 地山単位体積重量 (γ)
- 地山内部摩擦角 (φ)
- 地山粘着力 (c)
- 上載荷重 (q)（オプション）
- 対数らせん初期半径 (r₀)
- 解析範囲角度 (θの範囲)

### 出力項目

- 必要支保圧 (P)
- 最不利滑り面形状（r₀, θ）

## 3. 計算アルゴリズム

### ステップ1：初期設定

- 地盤条件（γ, φ, c, H, q）を設定。
- 対数らせんの初期半径 r₀ と解析範囲角度 θ の範囲を設定。

### ステップ2：滑り面設定

- 対数らせん曲線：
  \(r = r_0 e^{\theta \tan\phi}\)

### ステップ3：各モーメント項の計算

- 土塊重量モーメント \(M_W\)
  \(M_W = \gamma A \bar{x}\)

  - \(A\)：滑り土塊断面積
  - \(\bar{x}\)：土塊重心から回転中心までの距離

- 上載荷重モーメント \(M_Q\)（任意）
  \(M_Q = q b x_Q\)

- せん断抵抗力モーメント \(M_{\tau}\)
  \(M_{\tau} = \int(c + \sigma_n \tan\phi) r \, ds\)

### ステップ4：モーメントつり合い計算

- 支保圧モーメント \(M_P\)を未知数として、以下の方程式を解く。
  \(M_W + M_Q = M_{\tau} + M_P\)
- 支保圧Pを算出する。

### ステップ5：反復計算と最不利条件の選定

- 対数らせんパラメータ（r₀、θ範囲）を変化させながら繰り返し計算を行う。
- 最も大きな支保圧を要する条件を最不利滑り面として選定。

## 4. システム構成

### フロントエンド

- 入力フォーム（Webインターフェース）
- 結果表示画面

### バックエンド

- 計算処理モジュール（Python推奨）
  - 数値積分ライブラリ（例：SciPy）を利用

## 5. データの入出力

- 入力データはJSON形式でバックエンドに送信。
- 計算結果（支保圧、滑り面形状）をJSON形式でフロントエンドに返送。

## 6. システム運用上の注意点

- 地盤定数の設定時には不確実性を考慮し、レンジを振った解析を推奨。
- 他の安定性評価手法とのクロスチェックを実施し、妥当性を検証する。

## 7. 今後の拡張性

- 3次元解析への拡張。
- 数値解析（FEM等）との連携。
- 地盤調査データとの統合管理。

以上を基に開発を進めることで、効率的かつ信頼性の高い切羽安定性評価を実現する。

